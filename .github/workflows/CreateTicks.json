{"collection":{"info":{"_postman_id":"e0d55b11-2bb8-437d-8248-30fe43564f40","name":"Newmen","schema":"https://schema.getpostman.com/json/collection/v2.1.0/collection.json","updatedAt":"2025-07-07T02:28:31.000Z","createdAt":"2025-07-02T07:28:01.000Z","lastUpdatedBy":"31097230","uid":"31097230-e0d55b11-2bb8-437d-8248-30fe43564f40"},"item":[{"name":"Áç≤ÂèñToken","event":[{"listen":"test","script":{"id":"ac5b0692-cca7-4698-ba7b-1508fa97b2ea","exec":["\r","pm.test(\"Ëß£ÊûêÁªìÊûú\", () => {\r","\r","    const responseJson = pm.response.json();\r","\r","    pm.expect(responseJson.code).to.eql(\"OK\"); // ÊØîÂ∞ç code ÊòØÂê¶ÁÇ∫ OK\r","    pm.expect(responseJson.msg).to.eql(\"ÊàêÂäü\"); // ÊØîÂ∞ç msg ÊòØÂê¶ÁÇ∫ ÊàêÂäü\r","\r","    pm.environment.set(\"token\", responseJson.data.token); // Êää token Â≠òÂú® token\r","    pm.environment.set(\"customerNo\", responseJson.data.username); // Êää username Â≠òÂú® customerNo\r","});"],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"9ddf00d8-f2c7-4cc6-8ae5-5d6dbfa5720d","exec":[""],"type":"text/javascript","packages":{}}}],"id":"2e355eaf-9b96-4aa9-b49f-e36ff9c719c8","protocolProfileBehavior":{"disableBodyPruning":true,"disabledSystemHeaders":{}},"request":{"method":"POST","header":[{"key":"callType","value":"app","type":"text"},{"key":"lang","value":"zh-CN","type":"text"},{"key":"Content-Type","value":"application/json; charset=utf-8","type":"text","disabled":true}],"body":{"mode":"raw","raw":"{\r\n    \"username\": \"16600324321\",\r\n    \"mobilePrefix\": \"86\",\r\n    \"password\": \"aa123123\"\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{prd}}/user/login","host":["{{prd}}"],"path":["user","login"]}},"response":[],"uid":"31097230-2e355eaf-9b96-4aa9-b49f-e36ff9c719c8"},{"name":"‰∫§Êòì‰º∫ÊúçÂô®/user/login","event":[{"listen":"test","script":{"id":"2f4d818c-9560-48aa-9a57-b0cea2606b8d","exec":["pm.test(\"Content-Type header is application/json\", () => {\r","  pm.expect(pm.response.code).to.eql(200);\r","  pm.expect(pm.response.headers.get('Content-Type')).to.eql('application/json; charset=utf-8');\r","});\r","\r","pm.test(\"Ëß£ÊûêÁªìÊûú‰∏¶‰øùÂ≠òÁôªÂÖ•Ë≥áË®ä\", () => {\r","    let jsonData;\r","\r","    try {\r","        jsonData = pm.response.json();\r","    } catch (e) {\r","        console.error(\"‚ö†Ô∏è ÁÑ°Ê≥ïËß£Êûê JSON ÈüøÊáâ:\", e);\r","        return;\r","    }\r","\r","    // È©óË≠âÂæåÁ´ØÂõûÂÇ≥ÊòØÂê¶ÊàêÂäü\r","    pm.expect(jsonData.code).to.eql(0);\r","    pm.expect(jsonData.msg).to.eql(\"Login Success\");\r","\r","    // ÂÑ≤Â≠ò token Ëá≥Áí∞Â¢ÉËÆäÊï∏\r","    if (jsonData.token) {\r","        pm.environment.set(\"token1\", jsonData.token);\r","        console.log(\"‚úÖ token ÂÑ≤Â≠òÊàêÂäü:\", jsonData.token);\r","    } else {\r","        console.warn(\"‚ö†Ô∏è token ‰∏çÂ≠òÂú®\");\r","    }\r","\r","    // ÂÑ≤Â≠ò account.userid Ëá≥Áí∞Â¢ÉËÆäÊï∏\r","    if (jsonData.account && jsonData.account.account_groupid) {\r","        pm.environment.set(\"userid\", jsonData.account.account_groupid.toString());\r","        console.log(\"‚úÖ customerNo ÂÑ≤Â≠òÊàêÂäü:\", jsonData.account.userid);\r","    } else {\r","        console.warn(\"‚ö†Ô∏è account.userid ‰∏çÂ≠òÂú®\");\r","    }\r","});\r","\r","pm.test(\"Save account.id to environment variable\", function () {\r","    let jsonData = pm.response.json();\r","\r","    // Check if account and id exist\r","    if (jsonData.account && jsonData.account.id !== undefined) {\r","        pm.environment.set(\"ID\", jsonData.account.id);\r","        console.log(\"‚úÖ ID ÂÑ≤Â≠òÊàêÂäü:\", jsonData.account.id);\r","    } else {\r","        console.warn(\"account.id not found in response\");\r","    }\r","\r","    pm.expect(jsonData.code).to.eql(0);  // Optional: validate success\r","});"],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"d99f447b-1d43-46dc-afe0-afccbfc7fbfc","exec":[""],"type":"text/javascript","packages":{}}}],"id":"240b5ecd-9950-4186-be48-afec8f1cf204","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","value":"application/json; charset=utf-8","type":"text"}],"url":{"raw":"{{prd_mtrade}}/user/login?customer_no={{customerNo}}&password=aa123123&company_id=1","host":["{{prd_mtrade}}"],"path":["user","login"],"query":[{"key":"customer_no","value":"{{customerNo}}"},{"key":"password","value":"aa123123"},{"key":"company_id","value":"1"}]}},"response":[],"uid":"31097230-240b5ecd-9950-4186-be48-afec8f1cf204"},{"name":"Êü•ÁúãÈªûÂ∑Æ","event":[{"listen":"test","script":{"id":"d86b24a2-d539-476d-90ed-af0c7817173b","exec":["pm.test(\"Extract XAUUSD price\", function () {\r","    const jsonData = pm.response.json();\r","\r","    const target = jsonData.find(item => item.symbol === \"XAUUSD\");\r","\r","    if (target && target.price) {\r","        pm.environment.set(\"price\", target.price);\r","        console.log(\"‚úÖ Found XAUUSD price:\", target.price);\r","    } else {\r","        console.warn(\"‚ö†Ô∏è XAUUSD symbol not found or price missing.\");\r","    }\r","});\r",""],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"2d77cf83-86af-4431-ad1f-5352f529d57f","exec":[""],"type":"text/javascript","packages":{}}}],"id":"c4e4ea32-c1f8-4546-9002-2564a06b3894","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[],"url":{"raw":"https://39.108.7.68:9090/api/v1/marketprice?company=1&timeformat=1","protocol":"https","host":["39","108","7","68"],"port":"9090","path":["api","v1","marketprice"],"query":[{"key":"company","value":"1"},{"key":"timeformat","value":"1"}]}},"response":[],"uid":"31097230-c4e4ea32-c1f8-4546-9002-2564a06b3894"},{"name":"ÈñãÂÄâ /account/openposition","event":[{"listen":"test","script":{"id":"638f6094-7c57-42b4-9860-cc99aedd3333","exec":["pm.test(\"Extract position volume and order_refid\", function () {\r","    const jsonData = pm.response.json();\r","\r","    if (jsonData.position) {\r","        if (jsonData.position.volume !== undefined) {\r","            pm.environment.set(\"volume\", jsonData.position.volume);\r","            console.log(\"‚úÖ Saved volume:\", jsonData.position.volume);\r","        }\r","\r","        if (jsonData.position.order_refid !== undefined) {\r","            pm.environment.set(\"positionid\", jsonData.position.id);\r","            console.log(\"‚úÖ Saved positionid:\", jsonData.position.order_refid);\r","        }\r","    } else {\r","        console.warn(\"‚ö†Ô∏è No 'position' object found in response.\");\r","    }\r","});\r","let jsonData = pm.response.json();\r","console.log(\"üîê ÈñãÂÄâ JSON Response:\", JSON.stringify(jsonData, null, 2));"],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"359d776b-f656-49ee-a6e1-85b463367e7f","exec":[""],"type":"text/javascript","packages":{}}}],"id":"58633612-e2be-433f-a3db-3b551b8152da","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"url":{"raw":"{{prd_mtrade}}/account/openposition?token={{token1}}&accountid={{ID}}&direction=2&symbol=GWFX/USD/GTS/MM/MIN/0/A/XAUUSD&request_volume=0.01&request_price={{price}}&stop_loss=0&take_profit=0&refid=0&ref_accid=0&range=1000&client_type=17","host":["{{prd_mtrade}}"],"path":["account","openposition"],"query":[{"key":"token","value":"{{token1}}"},{"key":"accountid","value":"{{ID}}"},{"key":"direction","value":"2"},{"key":"symbol","value":"GWFX/USD/GTS/MM/MIN/0/A/XAUUSD"},{"key":"request_volume","value":"0.01"},{"key":"request_price","value":"{{price}}"},{"key":"stop_loss","value":"0"},{"key":"take_profit","value":"0"},{"key":"refid","value":"0"},{"key":"ref_accid","value":"0"},{"key":"range","value":"1000"},{"key":"client_type","value":"17"}]}},"response":[],"uid":"31097230-58633612-e2be-433f-a3db-3b551b8152da"},{"name":"Âπ≥ÂÄâ /account/closeposition","event":[{"listen":"test","script":{"id":"292c3aac-b1f0-40a0-b633-3043919b6155","exec":["let jsonData = pm.response.json();\r","console.log(\"üîê Âπ≥ÂÄâ JSON Response:\", JSON.stringify(jsonData, null, 2));"],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"c6e9bd04-52fc-494e-8e51-a4e95dfe67e9","exec":[],"type":"text/javascript"}}],"id":"f896d46e-eb83-4bb1-b104-6c55f0d54d11","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"url":{"raw":"{{prd_mtrade}}/account/closeposition?token={{token1}}&accountid={{ID}}&direction=2&symbol=GWFX/USD/GTS/MM/MIN/0/A/XAUUSD&request_volume={{volume}}&request_price={{price}}&stop_loss=0&take_profit=0&refid=0&ref_accid=0&range=1000&client_type=17&positionid={{positionid}}","host":["{{prd_mtrade}}"],"path":["account","closeposition"],"query":[{"key":"token","value":"{{token1}}"},{"key":"accountid","value":"{{ID}}"},{"key":"direction","value":"2"},{"key":"symbol","value":"GWFX/USD/GTS/MM/MIN/0/A/XAUUSD"},{"key":"request_volume","value":"{{volume}}"},{"key":"request_price","value":"{{price}}"},{"key":"stop_loss","value":"0"},{"key":"take_profit","value":"0"},{"key":"refid","value":"0"},{"key":"ref_accid","value":"0"},{"key":"range","value":"1000"},{"key":"client_type","value":"17"},{"key":"positionid","value":"{{positionid}}"}]}},"response":[],"uid":"31097230-f896d46e-eb83-4bb1-b104-6c55f0d54d11"},{"name":"Ëé∑ÂèñÂΩìÊó•Êàê‰∫§/account/dealTodayList","event":[{"listen":"test","script":{"id":"94a143bd-7578-484a-b01a-35be97b63412","exec":["//console.log(\"üîê Login Response:\");\r","//console.log(pm.response.text());\r","\r","let jsonData = pm.response.json();\r","console.log(\"üîê Áï∂Êó•Êàê‰∫§ JSON Response:\", JSON.stringify(jsonData, null, 2));"],"type":"text/javascript","packages":{}}},{"listen":"prerequest","script":{"id":"ca29713e-c94e-4cff-b146-93b000d7f04d","exec":[],"type":"text/javascript"}}],"id":"3e71785f-e42d-4a0d-b119-0ad5e21aaa20","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[],"url":{"raw":"{{prd_mtrade}}/account/dealTodayList?accountid={{ID}}&token={{token1}}","host":["{{prd_mtrade}}"],"path":["account","dealTodayList"],"query":[{"key":"accountid","value":"{{ID}}"},{"key":"token","value":"{{token1}}"}]}},"response":[],"uid":"31097230-3e71785f-e42d-4a0d-b119-0ad5e21aaa20"}]}}